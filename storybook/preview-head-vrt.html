<script>
	// Flag the document as in VRT mode.
	document.documentElement.dataset.vrt = true;

	window.addEventListener( 'load', async () => {
		// Wait for all web fonts to be loaded.
		const readyPromises = [ ...document.fonts.values() ].map( ( font ) => font.load() );

		await Promise.allSettled( readyPromises );

		// Signal Backstop that the environment is ready to go.
		document.body.classList.add( 'backstopjs-ready' );
	} );
</script>
<style>
	/* Disable animations/transitions by default in VRT unless a paused wrapper is present. */
	#storybook-root:not( :has( .googlesitekit-vrt-animation-paused ) ) *,
	#storybook-root:not( :has( .googlesitekit-vrt-animation-paused ) ) *::before,
	#storybook-root:not( :has( .googlesitekit-vrt-animation-paused ) ) *::after {
		animation: none !important;
		transition: none !important;
	}

	/**
	 * If a story needs animations active but paused, wrap with:
	 *   .googlesitekit-vrt-animation-paused
	 * This only affects animations (not transitions).
	 */
	#storybook-root .googlesitekit-vrt-animation-paused *,
	#storybook-root .googlesitekit-vrt-animation-paused *::before,
	#storybook-root .googlesitekit-vrt-animation-paused *::after{
		animation-play-state: paused !important;
	}
</style>
