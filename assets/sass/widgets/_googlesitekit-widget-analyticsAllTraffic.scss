/**
 * Analytics AllTraffic styles.
 *
 * Site Kit by Google, Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

.googlesitekit-plugin {

	.googlesitekit-widget--analyticsAllTraffic__totalcount {

		.googlesitekit-data-block__title {
			display: block;
			text-transform: capitalize;
		}

		svg {
			vertical-align: bottom;
		}

		.googlesitekit-cta-link {
			font-size: $fs-body-lg;
			letter-spacing: $ls-m;
		}
	}

	.googlesitekit-widget__analytics--all-traffic,
	.googlesitekit-widget.googlesitekit-widget--legacy-all-traffic-widget {

		@include mdc-tab-text-label-color($c-surfaces-on-surface-variant);

		.mdc-tab-scroller__scroll-content {
			justify-content: center;
		}

		.mdc-tab-indicator__content--underline {
			border-radius: 4px 4px 0 0;
			height: 4px;
		}

		.mdc-tab__text-label {
			letter-spacing: normal;
			opacity: 1;
			text-transform: none;
		}

		.mdc-tab {

			@include mdc-tab-active-text-label-color($c-content-primary);

			height: 40px;
			margin: 0 10px;
			padding: 0 20px;

			@media (min-width: $bp-tablet) and (max-width: $bp-xlarge) {
				margin: 0;
				padding: 0 10px;
			}
		}

		.mdc-tab--active[disabled] .mdc-tab-indicator__content--underline {
			background-color: $c-jumbo;
			opacity: 0.6;
		}

		.googlesitekit-widget__footer {
			padding-top: 0;
		}

		.googlesitekit-data-block__title {
			font-size: $fs-body-md;
			letter-spacing: $ls-s;
			line-height: $lh-body-md;
		}

		.googlesitekit-data-block__datapoint {
			font-size: $fs-display-lg;
			line-height: $lh-display-lg;
		}

		.googlesitekit-data-block__arrow {
			vertical-align: top;
		}

		.googlesitekit-data-block__suffix {
			font-weight: $fw-normal;
		}
	}

	.googlesitekit-widget--analyticsAllTraffic__user-count-chart {

		@media (min-width: $bp-desktop) {
			position: relative;
			top: 16px;
		}

		@media (min-width: $bp-xlarge) {
			top: 0;
		}
	}

	.googlesitekit-widget--analyticsAllTraffic__dimensions {
		min-height: 450px;
		padding-top: 30px;
		position: relative;

		.googlesitekit-preview-block {

			&.googlesitekit-widget--analyticsAllTraffic__dimensions--not-loading {
				display: none;
			}

			&.googlesitekit-widget--analyticsAllTraffic__dimensions--loading {
				left: 50%;
				position: absolute;
				top: 50%;
				transform: translate(-50%, -50%);
			}
		}

		.googlesitekit-widget--analyticsAllTraffic__dimensions-container {
			position: relative;
		}
	}

	.googlesitekit-widget--analyticsAllTraffic__totalcount--loading {
		margin: 0 0 10px;

		@media (min-width: $bp-xlarge) {
			// Override `PreviewBlock` height definition, since it doesn't
			// support flexible sizes per breakpoint.
			// TODO: Remove and achieve via `PreviewBlock` extra props instead.
			min-height: 106px;
		}
	}

	.googlesitekit-widget--analyticsAllTraffic__dimensions-chart {
		height: 100%;
		position: relative;
		width: 100%;
	}

	.googlesitekit-widget--analyticsAllTraffic__dimensions-chart .googlesitekit-chart-loading {
		padding-bottom: 32px;
		padding-top: 32px;
	}

	.googlesitekit-widget--analyticsAllTraffic__empty-dimensions-chart {
		padding: $grid-gap-phone;
		text-align: center;

		@media (min-width: $bp-desktop) {
			padding: $grid-gap-desktop;
		}

		.mdc-layout-grid__inner {
			align-items: center;
			min-height: 120px;

			@media (min-width: $bp-desktop) {
				min-height: 270px;
			}
		}

		svg {
			max-width: 140px;
		}

		h4 {
			color: $c-surfaces-on-surface-variant;
			font-family: $f-primary;
			font-size: $fs-body-lg;
			font-weight: $fw-normal;
			letter-spacing: $ls-m;
			line-height: $lh-body-lg;
			margin: 0;
		}

		p {
			color: $c-surfaces-on-surface-variant;
			font-size: $fs-body-sm;
			letter-spacing: $ls-xs;
			line-height: $lh-body-sm;
			margin: 4px 0 0;
		}
	}

	.googlesitekit-widget--analyticsAllTraffic__selectable {
		// Use pointer when hovering over chart slice or legend entry.
		.googlesitekit-chart__inner > div > div > div > svg {

			& > g > path,
			& > g > g {
				cursor: pointer;
			}
		}
	}

	.googlesitekit-widget--analyticsAllTraffic__slice-selected {
		// Allow interacting with tooltip (e.g. to click links) when slice is
		// selected.
		.googlesitekit-chart--PieChart div.google-visualization-tooltip {
			pointer-events: auto;
			z-index: 8;
		}
	}

	.googlesitekit-widget--analyticsAllTraffic__dimensions-chart-title {
		color: $c-surfaces-on-surface-variant;
		font-size: $fs-body-sm;
		font-weight: $fw-medium;
		left: 50%;
		letter-spacing: $ls-xs;
		max-width: 80px;
		position: absolute;
		text-align: center;
		text-transform: capitalize;
		top: 50%;
		transform: translate(-50%, -50%);

		& span {
			display: block;
			font-weight: $fw-normal;
		}
	}

	.googlesitekit-widget--analyticsAllTraffic__dimensions-chart-gathering-data {
		color: $c-silver-2;
		font-size: $fs-title-lg;
		left: 50%;
		line-height: $lh-title-lg;
		max-width: 80px;
		position: absolute;
		text-align: center;
		top: 50%;
		transform: translate(-50%, -50%);
	}

	.googlesitekit-widget--analyticsAllTraffic__tabs--small {
		text-align: center;

		@media (min-width: $bp-tablet) {
			display: none;
		}
	}

	.googlesitekit-widget--analyticsAllTraffic__tabs--loading {
		display: flex;
		flex-direction: row;
		justify-content: center;

		.googlesitekit-preview-block {
			margin: 0 10px;
		}
	}

	.googlesitekit-widget--analyticsAllTraffic__totals {
		// HACK: Fixes jumping of widget when a dimension is selected.
		@media (min-width: $bp-desktop) {
			margin-bottom: $grid-gap-desktop * -1;
		}

		// Fixes error state overflow
		.googlesitekit-cta--error {
			height: auto;
			margin-top: $grid-gap-phone;

			@media (min-width: $bp-desktop) {
				margin-top: $grid-gap-desktop;
			}
		}
	}

	.googlesitekit-widget--analyticsAllTraffic__chart {
		min-height: 368px;
		position: relative;
	}

	.googlesitekit-widget--analyticsAllTraffic__legend {
		margin-top: -6px;
		text-align: center;
	}

	.googlesitekit-widget--analyticsAllTraffic__legend .googlesitekit-cta-link__contents {
		align-items: center;
		display: inline-flex;
	}

	.googlesitekit-widget--analyticsAllTraffic__legend-slice {
		align-items: center;
		border-radius: 4px;
		color: $c-cape-cod;
		display: inline-flex;
		font-size: $fs-body-sm;
		font-weight: $fw-normal;
		letter-spacing: $ls-xs;
		margin: 0 4px 0 0;
		padding: 7px 4px;
		position: relative;
		text-transform: capitalize;

		&:hover {
			text-decoration: none;
		}

		&:focus {
			outline: none;
		}
	}

	.googlesitekit-widget--analyticsAllTraffic__label {
		display: inline-flex;
		flex-direction: column;

		&::after {
			content: attr(data-label);
			display: inline-flex;
			font-weight: $fw-medium;
			height: 0;
			visibility: hidden;
		}
	}

	.googlesitekit-widget--analyticsAllTraffic__dot {
		border-radius: 50%;
		display: inline-block;
		height: 12px;
		margin: 0 4px 0 0;
		width: 12px;
	}

	.googlesitekit-widget--analyticsAllTraffic__underlay {
		display: block;
		height: 100%;
		left: 0;
		opacity: 0;
		position: absolute;
		top: 0;
		transition: opacity $t-default ease-in-out;
		width: 100%;
		z-index: 1;
	}

	.googlesitekit-widget--analyticsAllTraffic__legend-active {
		font-weight: $fw-medium;
	}

	.googlesitekit-widget--analyticsAllTraffic__legend-active,
	.googlesitekit-widget--analyticsAllTraffic__legend-slice:hover {

		.googlesitekit-widget--analyticsAllTraffic__underlay {
			opacity: 0.16;
		}
	}

	.googlesitekit-widget--analyticsAllTraffic__legend-others {
		cursor: text;

		&:hover {

			.googlesitekit-widget--analyticsAllTraffic__underlay {
				opacity: 0;
			}
		}
	}

	.googlesitekit-widget--analyticsAllTraffic__legend--single {

		.googlesitekit-widget--analyticsAllTraffic__legend-slice:not(:first-child) {
			display: none;
		}
	}
}
